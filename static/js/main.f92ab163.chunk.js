(this["webpackJsonpi-can-help-login"]=this["webpackJsonpi-can-help-login"]||[]).push([[0],{145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(10),r=n.n(i),o=n(31),s=n(11),l=n(87),j=n(88),d=n(98),b=n(97),O=n(40),m=n(24),u=n(179),h=n(148),x=n(181),g=n(195),p=n(194),v=n(183),f=n(177),N=n(2),y=Object(f.a)({root:{marginTop:"30px"},paper:{backgroundColor:"#c2ede4"},submitButton:{margin:"15px"},loginTitle:{fontSize:"30px",fontFamily:"Roboto"},innerPaper:{marginTop:"10px",marginBottom:"20px"}});var w=function(e){var t=e.Login,n=e.error,c=y(),i=Object(a.useState)({Email:"",Password:""}),r=Object(m.a)(i,2),o=r[0],s=r[1];return Object(N.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(o)},children:Object(N.jsx)(u.a,{maxWidth:"sm",className:c.root,children:Object(N.jsxs)(h.a,{className:c.paper,elevation:3,children:[Object(N.jsxs)(x.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(N.jsx)("h2",{className:c.loginTitle,children:"Login"}),Object(N.jsx)(g.a,{width:"70%",children:Object(N.jsxs)(h.a,{className:c.innerPaper,elevation:2,children:[Object(N.jsxs)(x.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:4,children:[Object(N.jsx)(x.a,{item:!0,children:Object(N.jsx)(p.a,{id:"outlined-basic",label:"Email",variant:"standard",type:"email",onChange:function(e){return s(Object(O.a)(Object(O.a)({},o),{},{Email:e.target.value}))},value:o.Email})}),Object(N.jsx)(x.a,{item:!0,children:Object(N.jsx)(p.a,{id:"outlined-basic",label:"Password",type:"password",variant:"standard",onChange:function(e){return s(Object(O.a)(Object(O.a)({},o),{},{Password:e.target.value}))},value:o.Password})})]}),""!==n?Object(N.jsx)("div",{className:"error",children:n}):""]})}),Object(N.jsx)(v.a,{className:c.submitButton,variant:"contained",type:"submit",value:"LOGIN",children:"LOGIN"})]}),Object(N.jsx)(x.a,{container:!0,direction:"column",alignItems:"center"})]})})})},C="https://ichnserverdev.azurewebsites.net",S=n.p+"static/media/logoNoBkg.b893081a.png",k=n(30),I=n.n(k),B=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).Login=function(t){I.a.post("".concat(C,"/User/Login"),t).then((function(t){console.log("res ",t.config),localStorage.setItem("login",JSON.stringify({login:!0,token:t.data.token})),e.storeCollector(),window.location.replace("".concat(window.location.pathname,"/"))})).catch((function(t){console.log(t),e.setState({error:"Could not log in"})}))},e.state={Email:null,Password:null,login:!1,store:null,error:""},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.storeCollector()}},{key:"storeCollector",value:function(){var e=JSON.parse(localStorage.getItem("login"));e&&e.login&&this.setState({login:!0,store:e,error:""})}},{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("img",{className:"login-logo",src:S,alt:"KyendR"}),Object(N.jsx)(w,{Login:this.Login,error:this.state.error})]})}}]),n}(c.a.Component),D=n(198),P=n(184),L=n(185),A=n(66),J=n.n(A),E=Object(f.a)({root:{width:"70%"},descDiv:{whiteSpace:"wrap"},uncommit:{backgroundColor:"#c46956",height:"30px"}});var z=function(e){var t=e.title,n=e.description,a=e.details,c=e.id,i=e.Uncommit,r=E();return Object(N.jsxs)(x.a,{container:!0,item:!0,xs:12,justifyContent:"space-around",alignItems:"center",children:[Object(N.jsxs)(D.a,{className:r.root,children:[Object(N.jsx)(P.a,{expandIcon:Object(N.jsx)(J.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(N.jsx)("div",{className:r.descDiv,children:t})}),Object(N.jsxs)(L.a,{children:[a||"No Details",Object(N.jsx)("br",{}),n||"No Description"]})]}),Object(N.jsx)(v.a,{onClick:function(){return i(c)},className:r.uncommit,children:"Uncommit"})]})},M=n(186);var F=function(){var e=Object(a.useState)({commitments:[]}),t=Object(m.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!0),r=Object(m.a)(i,2),o=r[0],s=r[1];Object(a.useEffect)((function(){l()}),[]);var l=function(){var e=JSON.parse(localStorage.getItem("login"));I.a.get("".concat(C,"/Provider/GetMyCommitments"),{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){console.log(e.data),s(!1),c(e.data)})).catch((function(e){return console.log(e)}))},j=function(e){var t=JSON.parse(localStorage.getItem("login"));I.a.post("".concat(C,"/Provider/Commit"),{needId:e,count:0},{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){console.log(e),l(e.data)})).catch((function(e){return console.log(e)}))};return Object(N.jsx)("div",{children:o?Object(N.jsx)("div",{className:"loading",children:Object(N.jsx)(M.a,{})}):n.length>0?Object(N.jsx)(x.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:n.map((function(e,t){return Object(N.jsx)(z,{id:e.id,title:e.title,description:e.description,details:e.details,Uncommit:j},e.id)}))}):Object(N.jsxs)("div",{className:"no-commitments",children:[Object(N.jsx)("h2",{children:"No Commitments yet."}),Object(N.jsx)("h3",{children:'View the "Fill a Need" page to find a new commitment.'})]})})},G=Object(f.a)({root:{width:"70%"},descDiv:{whiteSpace:"wrap"},commit:{backgroundColor:"#b3eba7",height:"30px"}});var T=function(e){var t=e.title,n=e.description,a=e.details,c=e.id,i=e.Commit,r=G();return Object(N.jsxs)(x.a,{container:!0,item:!0,xs:12,justifyContent:"space-around",alignItems:"center",children:[Object(N.jsxs)(D.a,{className:r.root,children:[Object(N.jsx)(P.a,{expandIcon:Object(N.jsx)(J.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(N.jsx)("div",{className:r.descDiv,children:t})}),Object(N.jsxs)(L.a,{children:[a||"No Details",Object(N.jsx)("br",{}),n||"No Description"]})]}),Object(N.jsx)(v.a,{onClick:function(){return i(c)},className:r.commit,children:"Commit"})]})};var U=function(){var e=Object(a.useState)({needs:[]}),t=Object(m.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!0),r=Object(m.a)(i,2),o=r[0],s=r[1];Object(a.useEffect)((function(){l()}),[]);var l=function(){var e=JSON.parse(localStorage.getItem("login"));I.a.get("".concat(C,"/Provider/GetOpenOpportunities?daysOut=60"),{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){console.log(e),s(!1),c(e.data)})).catch((function(e){return console.log(e)}))},j=function(e){var t=JSON.parse(localStorage.getItem("login"));I.a.post("".concat(C,"/Provider/Commit"),{needId:e,count:1},{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){l(),console.log(e)})).catch((function(e){return console.log(e)}))};return Object(N.jsx)("div",{children:o?Object(N.jsx)("div",{className:"loading",children:Object(N.jsx)(M.a,{})}):n.length>0?Object(N.jsx)(x.a,{container:!0,direction:"column",spacing:2,children:n.map((function(e){return Object(N.jsx)(T,{id:e.id,title:e.title,description:e.description,details:e.details,Commit:j},e.id)}))}):Object(N.jsx)("div",{className:"no-commitments",children:Object(N.jsx)("h2",{children:"No Opportunities Available"})})})};var H=function(){return Object(N.jsx)("div",{children:"To Be Developed"})};var R=function(){return Object(N.jsx)("div",{className:"welcome",children:Object(N.jsxs)(x.a,{container:!0,direction:"column",alignItems:"center",spacing:2,children:[Object(N.jsx)(x.a,{item:!0,xs:8,children:Object(N.jsx)(o.b,{to:"/meetaneed",style:{textDecoration:"none"},children:Object(N.jsx)(v.a,{style:{minWidth:"170px"},variant:"contained",color:"primary",children:"Fill a Need"})})}),Object(N.jsx)(x.a,{item:!0,xs:8,children:Object(N.jsx)(o.b,{to:"/commitments",style:{textDecoration:"none"},children:Object(N.jsx)(v.a,{style:{minWidth:"170px"},variant:"contained",color:"primary",children:"My Commitments"})})}),Object(N.jsx)(x.a,{item:!0,xs:8,children:Object(N.jsx)(o.b,{to:"/history",style:{textDecoration:"none"},children:Object(N.jsx)(v.a,{style:{minWidth:"170px"},variant:"contained",color:"primary",children:"My History"})})})]})})},W=Object(a.createContext)();function K(e){var t=e.children,n=Object(a.useState)(!1),c=Object(m.a)(n,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){if(!i){var e=JSON.parse(localStorage.getItem("login"));e&&e.token&&r(!0)}}),[]),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(W.Provider,{value:{isAuthenticated:i,setIsAuthenticated:r},children:t})})}var V=n(58),q=n(4),Q=n(18),X=n(197),Y=n(190),Z=n(191),$=n(192),_=n(182),ee=n(67),te=n(193),ne=n(149),ae=n(91),ce=n.n(ae),ie=n(92),re=n.n(ie),oe=n(93),se=n.n(oe),le=n(187),je=n(188),de=n(189),be=n(96),Oe=n.n(be),me=n(95),ue=n.n(me),he=n(94),xe=n.n(he),ge=n(90),pe=n.n(ge);var ve=function(e){var t=e.closeDrawer,n=Object(a.useContext)(W).setIsAuthenticated;return Object(N.jsx)(_.a,{children:Object(N.jsxs)(le.a,{button:!0,onClick:function(){var e=JSON.parse(localStorage.getItem("login"));e&&e.token&&I.a.post("".concat(C,"/User/Logout"),{withCredentials:!0},{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){localStorage.removeItem("login"),t(),n(!1)})).catch((function(e){t(),n(!1),console.log(e.response)}))},children:[Object(N.jsx)(je.a,{children:Object(N.jsx)(pe.a,{})}),Object(N.jsx)(de.a,{primary:"Logout"})]})})},fe=240,Ne=Object(f.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#c2ede4",justifyContent:"space-between"},appBarShift:{width:"calc(100% - ".concat(fe,"px)"),marginLeft:fe,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:fe,flexShrink:0},drawerPaper:{width:fe},drawerHeader:Object(O.a)(Object(O.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"space-between"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function ye(){var e=Ne(),t=Object(Q.a)(),n=c.a.useState(!1),a=Object(m.a)(n,2),i=a[0],r=a[1],l=Object(s.g)(),j=function(){r(!1)};return Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)(Y.a,{}),Object(N.jsx)(Z.a,{position:"fixed",className:Object(q.a)(e.appBar,Object(V.a)({},e.appBarShift,i)),children:Object(N.jsx)($.a,{className:e.toolbar,children:Object(N.jsx)(ne.a,{"aria-label":"open drawer",onClick:function(){r(!0)},edge:"start",className:Object(q.a)(e.menuButton,i&&e.hide),children:Object(N.jsx)(ce.a,{})})})}),Object(N.jsxs)(X.a,{className:e.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:e.drawerPaper},children:[Object(N.jsxs)("div",{className:e.drawerHeader,children:[Object(N.jsx)(ee.a,{className:e.title,children:"KeyndR"}),Object(N.jsx)(ne.a,{onClick:j,children:"ltr"===t.direction?Object(N.jsx)(re.a,{}):Object(N.jsx)(se.a,{})})]}),Object(N.jsx)(te.a,{}),Object(N.jsx)(_.a,{children:Object(N.jsx)(o.b,{to:"/meetaneed",className:"/meetaneed"===l.pathname,style:{textDecoration:"none",color:"rgba(0, 0, 0, 0.87)"},onClick:j,children:Object(N.jsxs)(le.a,{button:!0,children:[Object(N.jsx)(je.a,{children:Object(N.jsx)(xe.a,{})}),Object(N.jsx)(de.a,{primary:"Fill a Need"})]})})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(o.b,{to:"/commitments",className:"/commitments"===l.pathname,style:{textDecoration:"none",color:"rgba(0, 0, 0, 0.87)"},onClick:j,children:Object(N.jsxs)(le.a,{button:!0,children:[Object(N.jsx)(je.a,{children:Object(N.jsx)(ue.a,{})}),Object(N.jsx)(de.a,{primary:"My Commitments"})]})})}),Object(N.jsx)(_.a,{children:Object(N.jsxs)(le.a,{button:!0,children:[Object(N.jsx)(je.a,{children:Object(N.jsx)(Oe.a,{})}),Object(N.jsx)(de.a,{primary:"My History"})]})}),Object(N.jsx)(ve,{closeDrawer:j}),"v4"]})]})}var we=Object(f.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#c2ede4"}}}));function Ce(){var e=we();return Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)(Y.a,{}),Object(N.jsx)(Z.a,{position:"fixed",className:Object(q.a)(e.appBar),children:Object(N.jsx)($.a,{})})]})}var Se=function(){var e=Object(a.useContext)(W).isAuthenticated;return Object(N.jsx)("div",{className:"nav",children:e?Object(N.jsx)(ye,{}):Object(N.jsx)(Ce,{})})};n(145);var ke=Object(s.h)((function(){var e=Object(a.useContext)(W).isAuthenticated;return Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(Se,{}),Object(N.jsxs)(s.d,{children:[Object(N.jsx)(s.b,{exact:!0,path:"/",children:e?Object(N.jsx)(R,{}):Object(N.jsx)(s.a,{to:"/login"})}),Object(N.jsx)(s.b,{exact:!0,path:"/login",children:e?Object(N.jsx)(s.a,{to:"/"}):Object(N.jsx)(B,{})}),Object(N.jsx)(s.b,{path:"/commitments",children:e?Object(N.jsx)(F,{}):Object(N.jsx)(s.a,{to:"/login"})}),Object(N.jsx)(s.b,{path:"/meetaneed",children:e?Object(N.jsx)(U,{}):Object(N.jsx)(s.a,{to:"/login"})}),Object(N.jsx)(s.b,{path:"/history",children:e?Object(N.jsx)(H,{}):Object(N.jsx)(s.a,{to:"/login"})})]})]})}));r.a.render(Object(N.jsx)(o.a,{children:Object(N.jsx)(K,{children:Object(N.jsx)(ke,{})})}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.f92ab163.chunk.js.map